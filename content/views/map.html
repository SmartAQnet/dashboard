<div ng-controller="MapCtrl" id="fullscreen" class="fullscreen">
    <div class="card-body" id="card-body-map">
        <div id="map" ng-show="mapVisible" class="map" height="400px" width="400px" ng-class="{isControlSidePanelOpen: isControlSidePanelOpen}"></div>
        <div id="mapOverlay" ng-class="{active: isMapOverlayVisible}">
            <div id="mapOverlayUI">
                <div id="mapOverlayLabel">
                    <h3>Please adjust the map to capture the area of interest</h3>
                </div>
                <div id="mapOverlayButtons">
                        <button ng-click="cancelHistoricDataSelection()"  class="btn btn-secondary btn-raised"  type="button">Cancel</button>
                        <button ng-click="confirmHistoricDataSelection()" class="btn btn-primary btn-raised"  type="button">Load data of this area</button>
                </div>
            </div>
            <div class="map-viewfinder map-viewfinder-lt"></div>
            <div class="map-viewfinder map-viewfinder-rt"></div>
            <div class="map-viewfinder map-viewfinder-lb"></div>
            <div class="map-viewfinder map-viewfinder-rb"></div>
        </div>
        <!-- <div id="map-feature-tooltip" ng-style="featureTooltipStyle" ng-class="{nodisplay: isTooltipHidden}">{{featureTooltip}}</div> -->
        <div id="map-feature-tooltip"></div>
        <button id="controlPanelButton" ng-click="toggleControlSidepanel(); $event.stopPropagation();" type="button" class="btn btn-primary bmd-btn-fab">
            <i class="fas fa-layer-group"></i>
        </button>
        <button id="legendButton" ng-click="toggleLegendSidepanel();" type="button" class="btn btn-secondary bmd-btn-fab bmd-btn-fab-sm" ng-class="{invisible: isLegendInvisible}">
                <i class="fas fa-ruler-vertical"></i>
            </button>
        <div class="card" id="ControlSidepanel" ng-class="{opened: isControlSidePanelOpen}">
            <div class="card-header" id="control-sidepanel-header">
                <div class="sidepanel-header-name">Controls</div>
                <div class="btn-group" role="group" aria-label="Sidebar buttons">
                    <div style="display: none;" class="external-fullscreen"></div>
                    <button ng-click="toggleControlSidepanel()" type="button" class="btn btn-primary btn-sm"><i class="fa fa-times" aria-hidden="true"></i></button>
                </div>
            </div>
            <div class="card-body">
                <div class="sidepanel-subpanel-right" id="Layer-Panel">
                    <div class="sidepanel-subtitle">Layers:</div>
                    <div class="switch">
                        <label>
                            <input type="checkbox" id="Layer-Pins" name="Layer" ng-model="isLayerPinsActive" ng-change="changedLayerPinsActive()">
                            Pins
                        </label>
                    </div>
                    <div class="switch">
                        <label>
                                <input type="checkbox" id="Layer-ColoredMarkers" name="Layer" ng-model="isColorMarkersActive" ng-change="changedColorMarkersActive()">
                            Colored Markers
                        </label>
                    </div>
                    <div class="switch" style="display: none">
                        <label>
                                <input type="checkbox" id="Layer-Kriging" name="Layer" ng-model="isKrigingActive" ng-change="changedKrigingActive()">
                            Kriging
                        </label>
                    </div>
                </div>
                <div class="sidepanel-subpanel-right" style="display: none" id="Source-Panel">
                    <div class="sidepanel-subtitle">Data Source:</div>
                    <div>
                        <input type="radio" id="Source-Real" name="Source" ng-model="source" value="realsource" ng-change="sourceChanged()">
                        <label for="Source-Real">Real Data</label>
                    </div>
                    <div>
                        <input type="radio" id="Source-Simulation" name="Source" ng-model="source" value="simulationsource" ng-change="sourceChanged()">
                        <label for="Source-Simulation">Simulation Data</label>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <div class="dropdown obspropertyList-dropdown">
                    <button class="btn btn-secondary btn-raised dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        {{obspropertyName}}
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a ng-repeat="property in obspropertyList" ng-click="selectedObsproperty(property)" class="dropdown-item" href="javascript:void(0);">{{property.name}}</a>
                    </div>
                </div>
                <div class="sidepanel-subpanel-right" id="Refresh-Panel">
                    <div>
                        <button class="btn btn-primary btn-raised refreshbutton" id="refreshbutton" ng-click="UpdateMap()">Refresh Map</button>
                        <!-- disable for few sec or until loaded-->
                    </div>
                    <div class="checkbox">
                        <label>
                                <input type="checkbox" id="auto-refresh" name="auto-refresh" ng-model="isAutoRefreshActive" ng-change="changedAutoRefreshActive()"> Auto-Refresh
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <div class="card" id="LegendSidepanel" ng-class="{opened: isLegendSidePanelOpen, invisible: isLegendInvisible}">
            <div class="card-header" id="legend-sidepanel-header">
                <div id="LegendTitle">Legend</div>
                <button ng-click="toggleLegendSidepanel()" type="button" class="btn btn-primary btn-sm"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <div class="card-body">
                <div class="sidepanel-subpanel-left" id="Legend">
                    <div class="legend-container-container">
                        <div class="legend-container">
                            <div class="legend-scale" ng-style="scaleStyle"></div>
                        </div>
                        <div class="legend-text-container">
                            <!-- <div ng-style="{'bottom': point.relativeLocation+'%'}" class="legend-textbox" ng-repeat="point in relativePoints">{{point.value}}</div> -->
                            <div ng-if="limitColors.end" ng-style="{'height': scaleOvershoot+'%'}" class="legend-textbox legend-space">{{scaleLabelsLimits.end}}</div>
                            <div class="legend-label-container">
                                <div class="legend-textbox" ng-repeat="label in scaleLabels">{{label}}</div>
                            </div>
                            <div ng-if="limitColors.start" ng-style="{'height': scaleOvershoot+'%'}" class="legend-textbox legend-space">{{scaleLabelsLimits.start}}</div>
                        </div>
                    </div>
                    <div id="scaleCaption">
                        {{obspropertyName}}<br>[{{obspropertyUnit.replace("degC","Â°C")}}]
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card-footer" id="card-footer-map">
        <button ng-click="openHistoricDataCollapse()" id="historicDataButton" class="btn btn-secondary dropdown-toggle"  type="button" aria-haspopup="true" aria-expanded="false">Displayed Data: Latest</button>
        <rzslider rz-slider-model="slider.minValue"
            rz-slider-high="slider.maxValue"
            rz-slider-options="slider.options"></rzslider>
        <div class="sidepanel" id="InfoSidepanel"  ng-class="{closed: isInfoSidePanelClosed}">
            <div class="sidepanel-header" id="info-sidepanel-header">
                <div class="sidepanel-header-name">Information</div>
                <div class="togglebtn-container">
                    <div class="ol-full-screen ol-unselectable ol-control">
                        <span title="Toggle info-panel"><button ng-click="toggleInfoSidepanel()" id="togglebtn-sidepanel-bottom"></button></span>
                    </div>
                </div>
            </div>
            <div class="sidepanel-body" id="InfoPanelBody" ng-class="{closed: isInfoSidePanelClosed}">
                <div class="sidepanel-subpanel-bottom" id="Info-Panel">
                    <div class="sidepanel-subtitle">Detailed Information</div>
                    <div id="map-detailed-tooltip"></div>
                </div>
                <div class="sidepanel-subpanel-bottom" id="Link-Panel">
                    <div class="sidepanel-subtitle">Links</div>
                    <div id="map-crosslinks"></div>
                </div>
            </div>
            <div class="sidepanel-footer">
                <div class="sidepanel-subpanel-bottom" id="Bottom-Footer-Panel"></div>
            </div>
        </div>
    </div>
</div>




